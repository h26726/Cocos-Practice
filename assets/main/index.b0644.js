window.__require=function t(i,e,n){function s(c,h){if(!e[c]){if(!i[c]){var a=c.split("/");if(a=a[a.length-1],!i[a]){var r="function"==typeof __require&&__require;if(!h&&r)return r(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+c+"'")}c=a}var d=e[c]={exports:{}};i[c][0].call(d.exports,function(t){return s(i[c][1][t]||t)},d,d.exports,t,i,e,n)}return e[c].exports}for(var o="function"==typeof __require&&__require,c=0;c<n.length;c++)s(n[c]);return s}({enemyHit:[function(t,i){"use strict";cc._RF.push(i,"03d0eicVdNPrLi2w4ca3xNz","enemyHit"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.enemy=this.node.parent.getComponent("enemy")},start:function(){},onCollisionEnter:function(t){"hero"==t.node.group&&1==t.tag&&this.enemy.hurt()}}),cc._RF.pop()},{}],enemy:[function(t,i){"use strict";cc._RF.push(i,"fa8383anG9Glpo44LYJhotd","enemy");cc.Class({extends:cc.Component,properties:{},onLoad:function(){var t=this;this._speed=80,this.sp=cc.v2(0,0),this.tt=0,this.enemyState=1,this.rb=this.node.getComponent(cc.RigidBody),this.hp=5,this.isHit=!1,this.ani=this.node.getChildByName("body").getComponent(cc.Animation),this.ani.on("finished",function(i,e){"hurt"==e.name?(t.isHit=!1,t.hp<=0&&t.node.destroy()):"attack"==e.name&&t.setAni("idle"),t.enemyState=1}),this.moveLeft=!1,this.moveRight=!1,this.playerNode=cc.find("Canvas/bg/hero")},start:function(){},hurt:function(){this.hp<=0||(this.isHit=!0,this.enemyState=3,this.setAni("hurt"),this.hp--)},enemyAction:function(){var t=this.playerNode.position,i=this.node.position,e=cc.Vec2.distance(i,t);e<=30?(this.moveLeft=!1,this.moveRight=!1,this.enemyState=2):e<=150?(t.sub(i).x<0?(this.moveLeft=!0,this.moveRight=!1):(this.moveLeft=!1,this.moveRight=!0),this.enemyState=1):(this.moveLeft=!1,this.moveRight=!1,this.enemyState=1)},attack:function(){this.setAni("attack"),this.lv=this.rb.linearVelocity,this.lv.x=0,this.rb.linearVelocity=this.lv},move:function(){var t=Math.abs(this.node.scaleX);this.lv=this.rb.linearVelocity,this.moveLeft?(this.sp.x=-1,this.node.scaleX=-t,this.setAni("run")):this.moveRight?(this.sp.x=1,this.node.scaleX=t,this.setAni("run")):(this.sp.x=0,this.setAni("idle")),this.sp.x?this.lv.x=this.sp.x*this._speed:this.lv.x=0,this.rb.linearVelocity=this.lv},setAni:function(t){this.anima==t&&"hurt"!=this.anima||(this.anima=t,this.ani.play(t))},update:function(t){this.tt+=t,this.tt>=.3&&1==this.enemyState&&(this.enemyAction(t),this.tt=0),2==this.enemyState?this.attack():1==this.enemyState&&this.move()}}),cc._RF.pop()},{}],game:[function(t,i){"use strict";cc._RF.push(i,"9cb64ht1zlGF5DbeUmJLJAk","game"),cc.Class({extends:cc.Component,properties:{mapNode:cc.Node},onLoad:function(){cc.director.getPhysicsManager().enabled=!0,cc.director.getCollisionManager().enabled=!0,this.initMapNode(this.mapNode)},initMapNode:function(t){for(var i=t.getComponent(cc.TiledMap),e=i.getTileSize(),n=i.getLayer("wall"),s=n.getLayerSize(),o=0;o<s.width;o++)for(var c=0;c<s.height;c++){var h=n.getTiledTileAt(o,c,!0);if(0!=h.gid){h.node.group="wall",h.node.addComponent(cc.RigidBody).type=cc.RigidBodyType.Static;var a=h.node.addComponent(cc.PhysicsBoxCollider);a.offset=cc.v2(e.width/2,e.height/2),a.size=e,a.apply()}}},start:function(){}}),cc._RF.pop()},{}],hero:[function(t,i){"use strict";cc._RF.push(i,"d21a5U0+q5Ov5Xh9MD+BXFg","hero");var e={};cc.Class({extends:cc.Component,properties:{},onLoad:function(){this._speed=200,this.sp=cc.v2(0,0),this.combo=0,this.heroState=1,this.anima="idle",this.heroAni=this.node.getChildByName("body").getComponent(cc.Animation),this.rb=this.node.getComponent(cc.RigidBody),this.heroAni.on("finished",this.onAnimaFinished,this),cc.systemEvent.on("keydown",this.onKeydown,this),cc.systemEvent.on("keyup",this.onKeyup,this)},onDestroy:function(){cc.systemEvent.off("keydown",this.onKeydown,this),cc.systemEvent.off("keyup",this.onKeyup,this)},setAni:function(t){this.anima!=t&&(this.anima=t,this.heroAni.play(t))},onKeydown:function(t){e[t.keyCode]=1},onKeyup:function(t){e[t.keyCode]=0},onAnimaFinished:function(t,i){var e=this;"attack"!=i.name&&"attack2"!=i.name&&"attack3"!=i.name||(this.combo=(this.combo+1)%3,this.heroState=1,this.setAni("idle"),setTimeout(function(){2!=e.heroState&&(e.combo=0)},500))},attack:function(){this.lv=this.rb.linearVelocity,(e[cc.macro.KEY.z]||e[cc.macro.KEY.j])&&(0==this.combo?this.setAni("attack"):1==this.combo?this.setAni("attack2"):2==this.combo&&this.setAni("attack3"),this.lv.x=0),this.rb.linearVelocity=this.lv},move:function(){var t=Math.abs(this.node.scaleX);this.lv=this.rb.linearVelocity,e[cc.macro.KEY.a]||e[cc.macro.KEY.left]?(this.sp.x=-1,this.node.scaleX=-t,this.setAni("run")):e[cc.macro.KEY.d]||e[cc.macro.KEY.right]?(this.sp.x=1,this.node.scaleX=t,this.setAni("run")):(this.sp.x=0,this.setAni("idle")),this.sp.x?this.lv.x=this.sp.x*this._speed:this.lv.x=0,this.rb.linearVelocity=this.lv},update:function(){1==this.heroState&&(e[cc.macro.KEY.z]||e[cc.macro.KEY.j])&&(this.heroState=2),2==this.heroState?this.attack():1==this.heroState&&this.move()},start:function(){}}),cc._RF.pop()},{}],url:[function(t,i){"use strict";cc._RF.push(i,"4ab44NzOJJCWq9scc2X8vqT","url"),cc.Class({extends:cc.Component,properties:{button:cc.Button},onLoad:function(){this.node.on("mouseenter",function(){document.body.style.cursor="pointer"}),this.node.on("mouseleave",function(){document.body.style.cursor="default"})},btnClick:function(){window.open("https://www.youtube.com/playlist?list=PLs9VcOx9WThiW-zUe6q5hY6zpyyKRSPDJ")},start:function(){}}),cc._RF.pop()},{}]},{},["enemy","enemyHit","game","hero","url"]);